# üìù –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `logback-spring.xml` —Å —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π –∏ –∞—Ä—Ö–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **–ï–¥–∏–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ñ–∏–ª—è
- **–ê—Ä—Ö–∏–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É** —Å –ø–∞–ø–∫–∞–º–∏ `current` –∏ `archive`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É** —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ —Å –∞—Ä—Ö–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

```
logs/
‚îú‚îÄ‚îÄ test/                                    # –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ current/                             # –¢–µ–∫—É—â–∏–µ –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ investment-data-stream-service-test.log
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors-test.log
‚îÇ   ‚îî‚îÄ‚îÄ archive/                             # –ê—Ä—Ö–∏–≤–Ω—ã–µ –ª–æ–≥–∏ (7 –¥–Ω–µ–π)
‚îÇ       ‚îú‚îÄ‚îÄ investment-data-stream-service-test.2024-01-15.0.log
‚îÇ       ‚îî‚îÄ‚îÄ errors-test.2024-01-15.0.log
‚îú‚îÄ‚îÄ prod/                                    # –ü—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ current/                             # –¢–µ–∫—É—â–∏–µ –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ investment-data-stream-service-prod.log
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors-prod.log
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics-prod.log
‚îÇ   ‚îî‚îÄ‚îÄ archive/                             # –ê—Ä—Ö–∏–≤–Ω—ã–µ –ª–æ–≥–∏ (30 –¥–Ω–µ–π)
‚îÇ       ‚îú‚îÄ‚îÄ investment-data-stream-service-prod.2024-01-15.0.log
‚îÇ       ‚îú‚îÄ‚îÄ errors-prod.2024-01-15.0.log
‚îÇ       ‚îî‚îÄ‚îÄ metrics-prod.2024-01-15.0.log
‚îú‚îÄ‚îÄ current/                                 # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (dev)
‚îÇ   ‚îú‚îÄ‚îÄ investment-data-stream-service.log
‚îÇ   ‚îî‚îÄ‚îÄ errors.log
‚îî‚îÄ‚îÄ archive/                                 # –ê—Ä—Ö–∏–≤–Ω—ã–µ –ª–æ–≥–∏ (15 –¥–Ω–µ–π)
    ‚îú‚îÄ‚îÄ investment-data-stream-service.2024-01-15.0.log
    ‚îî‚îÄ‚îÄ errors.2024-01-15.0.log
```

### –¢–∏–ø—ã –ª–æ–≥–æ–≤

1. **–û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏** - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **–õ–æ–≥–∏ –æ—à–∏–±–æ–∫** - —Ç–æ–ª—å–∫–æ ERROR —É—Ä–æ–≤–µ–Ω—å
3. **–õ–æ–≥–∏ –º–µ—Ç—Ä–∏–∫** - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞, INFO —É—Ä–æ–≤–µ–Ω—å
4. **–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏** - –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º

### üß™ TEST –æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (DEBUG —É—Ä–æ–≤–µ–Ω—å)
- **–ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** (queueSize: 1024)
- **–ö–æ—Ä–æ—Ç–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** (7 –¥–Ω–µ–π)
- **–ú–∞–ª—ã–µ —Ñ–∞–π–ª—ã** (50MB)

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```xml
com.example.investmentdatastreamservice: DEBUG
com.example.investmentdatastreamservice.service: DEBUG
com.example.investmentdatastreamservice.controller: DEBUG
org.springframework.web: DEBUG
org.hibernate.SQL: DEBUG
org.hibernate.type.descriptor.sql.BasicBinder: TRACE
```

**–§–∞–π–ª—ã:**
- `logs/test/current/investment-data-stream-service-test.log` (—Ç–µ–∫—É—â–∏–π)
- `logs/test/current/errors-test.log` (—Ç–µ–∫—É—â–∏–π)
- `logs/test/archive/` (–∞—Ä—Ö–∏–≤–Ω—ã–µ, 7 –¥–Ω–µ–π)

### üè≠ PROD –æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (WARN —É—Ä–æ–≤–µ–Ω—å)
- **–ë–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** (queueSize: 2048)
- **–î–æ–ª–≥–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** (30 –¥–Ω–µ–π)
- **–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** (500MB)

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```xml
com.example.investmentdatastreamservice: INFO
com.example.investmentdatastreamservice.service: INFO
com.example.investmentdatastreamservice.controller: WARN
org.springframework: WARN
org.hibernate.SQL: WARN
```

**–§–∞–π–ª—ã:**
- `logs/prod/current/investment-data-stream-service-prod.log` (—Ç–µ–∫—É—â–∏–π)
- `logs/prod/current/errors-prod.log` (—Ç–µ–∫—É—â–∏–π)
- `logs/prod/current/metrics-prod.log` (—Ç–µ–∫—É—â–∏–π)
- `logs/prod/archive/` (–∞—Ä—Ö–∏–≤–Ω—ã–µ, 30 –¥–Ω–µ–π)

## üìä –§–æ—Ä–º–∞—Ç—ã –ª–æ–≥–æ–≤

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
```
2024-01-15 10:30:45.123 [http-nio-8084-exec-1] INFO  [TEST] c.e.i.s.MarketDataStreamingService - Processing trade data
```

### –§–∞–π–ª–æ–≤—ã–π –≤—ã–≤–æ–¥
```
2024-01-15 10:30:45.123 [http-nio-8084-exec-1] INFO  [PROD] c.e.i.s.MarketDataStreamingService - Processing trade data
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∞:
- `%d{yyyy-MM-dd HH:mm:ss.SSS}` - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- `[%thread]` - –∏–º—è –ø–æ—Ç–æ–∫–∞
- `%-5level` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `[%X{profile:-DEFAULT}]` - –ø—Ä–æ—Ñ–∏–ª—å –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `%logger{36}` - –∏–º—è –ª–æ–≥–≥–µ—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 36 —Å–∏–º–≤–æ–ª–æ–≤)
- `%msg` - —Å–æ–æ–±—â–µ–Ω–∏–µ
- `%n` - –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ runtime –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JMX –∏–ª–∏ Actuator:

```bash
# –ß–µ—Ä–µ–∑ Actuator (—Ç–æ–ª—å–∫–æ –¥–ª—è test –æ–∫—Ä—É–∂–µ–Ω–∏—è)
curl -X POST http://localhost:8084/actuator/loggers/com.example.investmentdatastreamservice \
  -H "Content-Type: application/json" \
  -d '{"configuredLevel": "DEBUG"}'
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è

```java
// –í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
Logger logger = LoggerFactory.getLogger(YourClass.class);
logger.setLevel(Level.DEBUG);
```

## üìÅ –ê—Ä—Ö–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–†–æ—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É**: —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –≤ `archive/` –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- **–†–æ—Ç–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏**: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –ø–æ–ª–Ω–æ—á—å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —É–¥–∞–ª—è—é—Ç—Å—è
- **–§–æ—Ä–º–∞—Ç –∞—Ä—Ö–∏–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: `filename.YYYY-MM-DD.index.log`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | –¢–µ–∫—É—â–∏–µ —Ñ–∞–π–ª—ã | –ê—Ä—Ö–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã | –ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è | –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ |
|-----------|---------------|----------------|-----------------|--------------|
| TEST      | `current/`    | `archive/`     | 7 –¥–Ω–µ–π         | 50MB         |
| PROD      | `current/`    | `archive/`     | 30 –¥–Ω–µ–π        | 500MB        |
| Default   | `current/`    | `archive/`     | 15 –¥–Ω–µ–π        | 100MB        |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞–º–∏

```bash
# –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find logs -name "*.log" -type f -mtime +7 -delete

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∞—Ä—Ö–∏–≤–æ–≤
du -sh logs/*/archive/

# –ü–æ–¥—Å—á–µ—Ç —Ñ–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤–∞—Ö
find logs -path "*/archive/*" -name "*.log" | wc -l
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

1. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤
   du -sh logs/*/
   
   # –†–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–æ–≤
   du -sh logs/*/archive/
   ```

2. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫**
   ```bash
   # –ü–æ–¥—Å—á–µ—Ç –æ—à–∏–±–æ–∫ –≤ —Ç–µ–∫—É—â–∏—Ö —Ñ–∞–π–ª–∞—Ö
   grep -c "ERROR" logs/*/current/errors-*.log
   
   # –ü–æ–¥—Å—á–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∞—Ä—Ö–∏–≤–∞—Ö
   grep -c "ERROR" logs/*/archive/errors-*.log
   ```

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
   jstat -gc <pid>
   ```

### –ê–ª–µ—Ä—Ç—ã

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:**
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤ > 1GB
- –†–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞ > 5GB
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ > 100/—á–∞—Å
- –û—á–µ—Ä–µ–¥—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ > 80%

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤ > 500MB
- –†–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞ > 2GB
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ > 50/—á–∞—Å
- –û—á–µ—Ä–µ–¥—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ > 60%

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Ñ–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ appenders –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```xml
<appender name="ASYNC_FILE" class="ch.qos.logback.classic.AsyncAppender">
    <appender-ref ref="FILE"/>
    <queueSize>2048</queueSize>  <!-- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ -->
    <discardingThreshold>0</discardingThreshold>  <!-- –ù–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –ª–æ–≥–∏ -->
    <includeCallerData>false</includeCallerData>  <!-- –ù–µ –≤–∫–ª—é—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–∑–æ–≤–µ -->
</appender>
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

- **–ë–æ–ª—å—à–∞—è –æ—á–µ—Ä–µ–¥—å** (2048 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- **–û—Ç–∫–ª—é—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–∑–æ–≤–µ** (includeCallerData=false)
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** (WARN)
- **–†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** (500MB, 30 –¥–Ω–µ–π)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

- **–ú–µ–Ω—å—à–∞—è –æ—á–µ—Ä–µ–¥—å** (1024 —ç–ª–µ–º–µ–Ω—Ç–∞)
- **–í–∫–ª—é—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–∑–æ–≤–µ** (includeCallerData=true)
- **–î–µ—Ç–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** (DEBUG)
- **–ë—ã—Å—Ç—Ä–∞—è —Ä–æ—Ç–∞—Ü–∏—è** (50MB, 7 –¥–Ω–µ–π)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤

**–†–µ—à–µ–Ω–∏—è:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
2. –û—Ç–∫–ª—é—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–∑–æ–≤–µ (includeCallerData=false)
3. –ü–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG ‚Üí INFO ‚Üí WARN)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –ø–∞–ø–∫–∏ `archive/`

**–†–µ—à–µ–Ω–∏—è:**
1. –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
2. –°–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (maxHistory)
3. –í–∫–ª—é—á–∏—Ç—å –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (cleanHistoryOnStart=true)
4. –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤: `find logs -path "*/archive/*" -mtime +7 -delete`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ç–µ—Ä—è –ª–æ–≥–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TEST –ø—Ä–æ—Ñ–∏–ª—å —Å DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –í–∫–ª—é—á–∏—Ç–µ SQL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PROD –ø—Ä–æ—Ñ–∏–ª—å —Å WARN –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤ –∏ –∞—Ä—Ö–∏–≤–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–ø–∫–∏ `archive/`

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –í—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ DEBUG —É—Ä–æ–≤–µ–Ω—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ª–æ–≥–≥–µ—Ä–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞

```xml
<logger name="com.example.custom" additivity="false">
    <springProfile name="test">
        <level value="DEBUG"/>
    </springProfile>
    <springProfile name="prod">
        <level value="INFO"/>
    </springProfile>
    
    <appender-ref ref="CONSOLE"/>
    <appender-ref ref="ASYNC_FILE"/>
    <appender-ref ref="ASYNC_ERROR"/>
</logger>
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```xml
<appender name="CUSTOM_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>logs/custom-component.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
        <fileNamePattern>logs/custom-component.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
        <maxFileSize>100MB</maxFileSize>
        <maxHistory>30</maxHistory>
    </rollingPolicy>
    <encoder>
        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
</appender>
```

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-01-15  
**–ê–≤—Ç–æ—Ä:** Investment Data Stream Service Team
