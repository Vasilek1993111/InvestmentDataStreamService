# üìÆ Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è - Candles API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–º–ø–æ—Ä—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Postman**
2. –ù–∞–∂–º–∏—Ç–µ **Import** (–∫–Ω–æ–ø–∫–∞ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Candles_API.postman_collection.json`
4. –ù–∞–∂–º–∏—Ç–µ **Import**

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ö–æ–ª–ª–µ–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `{{base_url}}` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- `http://localhost:8080`

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `base_url`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

### 1Ô∏è‚É£ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/candles/subscription/start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–≤–µ—á–∏ |
| POST | `/api/candles/subscription/stop` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É |

### 2Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/candles/subscription/status` | –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ |
| GET | `/api/candles/subscription/stats` | –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |

### 3Ô∏è‚É£ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ì–æ—Ç–æ–≤—ã–π workflow: **–ó–∞–ø—É—Å–∫ ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∫–∞**

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–ø—É—Å–∫ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–≤–µ—á–∏

```
1. POST /api/candles/subscription/start
   ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞
   
2. GET /api/candles/subscription/status
   ‚úÖ isRunning: true, isConnected: true
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

```
GET /api/candles/subscription/stats

–û—Ç–≤–µ—Ç:
{
  "success": true,
  "isRunning": true,
  "isConnected": true,
  "totalReceived": 15420,      ‚Üê –ü–æ–ª—É—á–µ–Ω–æ —Å–≤–µ—á–µ–π
  "totalInserted": 15418,      ‚Üê –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î
  "totalErrors": 2,            ‚Üê –û—à–∏–±–æ–∫
  "availableInserts": 185,     ‚Üê –î–æ—Å—Ç—É–ø–Ω–æ —Å–ª–æ—Ç–æ–≤
  "maxConcurrentInserts": 200, ‚Üê –ú–∞–∫—Å. –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  "insertUtilization": 0.075,  ‚Üê –£—Ç–∏–ª–∏–∑–∞—Ü–∏—è 7.5%
  "errorRate": 0.00013        ‚Üê –û—à–∏–±–æ–∫ 0.013%
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏

```
POST /api/candles/subscription/stop
‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

---

## üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

–ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∞ (200 OK)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Collection Runner**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é **Candles API**
3. –ù–∞–∂–º–∏—Ç–µ **Run**

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫

```json
{
  "success": true,
  "message": "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–≤–µ—á–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞",
  "timestamp": "2024-10-21T12:30:00"
}
```

### ‚ùå –ü–æ–¥–ø–∏—Å–∫–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞

```json
{
  "success": false,
  "error": "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–≤–µ—á–∏ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞",
  "timestamp": "2024-10-21T12:30:00"
}
```

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```json
{
  "success": true,
  "isRunning": true,
  "isConnected": true,
  "totalReceived": 15420,
  "totalInserted": 15418,
  "totalErrors": 2,
  "availableInserts": 185,
  "maxConcurrentInserts": 200,
  "insertUtilization": 0.075,
  "errorRate": 0.00013,
  "timestamp": "2024-10-21T12:33:00"
}
```

---

## üîÑ –¢–∏–ø–∏—á–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

```mermaid
graph LR
    A[–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É] --> B[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å]
    B --> C{–†–∞–±–æ—Ç–∞–µ—Ç?}
    C -->|–î–∞| D[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏]
    C -->|–ù–µ—Ç| A
    D --> E[–†–∞–±–æ—Ç–∞...]
    E --> F[–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É]
```

**–®–∞–≥–∏:**

1. **–ó–∞–ø—É—Å–∫:** `POST /subscription/start`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `GET /subscription/status`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** `GET /subscription/stats` (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)
4. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:** `POST /subscription/stop`

---

## üõ†Ô∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π:

### TEST Environment
```
base_url = http://localhost:8080
```

### PROD Environment
```
base_url = https://api.production.com
```

–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: **Environment Selector** (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª Postman)

---

## üìù –ó–∞–º–µ—Ç–∫–∏

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏?

1. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ü–∏–∏ –∏ —Ñ—å—é—á–µ—Ä—Å—ã –∏–∑ –∫—ç—à–∞
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏ –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. –î–ª—è –∫–∞–∂–¥–æ–π —Å–≤–µ—á–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
   - –¢–∏–ø —Å–≤–µ—á–∏ (BULLISH/BEARISH/DOJI)
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏ –ø—Ä–æ—Ü–µ–Ω—Ç
   - –†–∞–∑–º–µ—Ä —Ç–µ–ª–∞, —Ç–µ–Ω–∏
   - –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω, —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
5. –°–≤–µ—á–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `minute_candles`

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Max –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫:** 200
- **–ü–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏:** CPU cores √ó 4
- **–£—Ç–∏–ª–∏–∑–∞—Ü–∏—è:** –æ–±—ã—á–Ω–æ 5-15% –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è

**–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `insertUtilization`: < 0.5 (< 50%)
- `errorRate`: < 0.01 (< 1%)
- `isConnected`: true

**–ü—Ä–æ–±–ª–µ–º—ã:**
- `insertUtilization` > 0.9 ‚Üí –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –ø–æ—Ç–æ–∫–æ–≤
- `errorRate` > 0.05 ‚Üí –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î –∏–ª–∏ API
- `isConnected` = false ‚Üí –ü–æ—Ç–µ—Ä—è–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å API

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü–æ–¥–ø–∏—Å–∫–∞ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞ ‚Üí –°–Ω–∞—á–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
2. –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –∫—ç—à–µ ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫—ç—à
3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É
POST /subscription/stop

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫—ç—à
GET /api/cache/stats

# 3. –ü—Ä–æ–≥—Ä–µ–π—Ç–µ –∫—ç—à –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
POST /api/cache/warmup

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
POST /subscription/start
```

### –í—ã—Å–æ–∫–∏–π errorRate

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î (–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, deadlocks)
2. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç API
3. –ù–µ—Ö–≤–∞—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î
3. –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Swagger UI:** `http://localhost:8080/swagger-ui.html`
- **Actuator Health:** `http://localhost:8080/actuator/health`
- **Metrics:** `http://localhost:8080/actuator/metrics`

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2024-10-21  
**–ê–≤—Ç–æ—Ä:** Investment Data Stream Service Team

